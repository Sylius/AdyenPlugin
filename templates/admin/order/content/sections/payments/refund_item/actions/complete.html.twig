{% set refund_payment = hookable_metadata.context.refund_payment %}
{% set graph = constant('Sylius\\RefundPlugin\\StateResolver\\RefundPaymentTransitions::GRAPH') %}
{% set transition_complete = constant('Sylius\\RefundPlugin\\StateResolver\\RefundPaymentTransitions::TRANSITION_COMPLETE') %}

{% if not sylius_adyen_is_adyen_payment_method(refund_payment.paymentMethod) and sylius_sm_can(refund_payment, graph, transition_complete) %}
    <form
        action="{{ path('sylius_refund_complete_refund_payment', {'orderNumber': refund_payment.order.number, 'id': refund_payment.id}) }}"
        method="POST"
        {{ sylius_test_html_attribute('refund-complete-button') }}
    >
        <button type="submit" class="btn">
            {{ ux_icon('tabler:check') }} {{ 'sylius.ui.complete'|trans }}
        </button>
    </form>
{% endif %}
